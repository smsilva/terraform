#!/bin/bash

TFVAR_FILE="$1"
TFVAR_FILE_CONF="${TFVAR_FILE}.conf"

[ -e "${TFVAR_FILE_CONF}" ] && rm -rf "${TFVAR_FILE_CONF}"

grep -E "^environment_name|^stack_name|^stack_version" "${TFVAR_FILE}" > "${TFVAR_FILE_CONF}"

convert-parameters-key-to-upper-case "${TFVAR_FILE_CONF}" | xargs -n 1 -I {} echo "export {}" > terraform-variables.conf

rm -rf "${TFVAR_FILE_CONF}"

